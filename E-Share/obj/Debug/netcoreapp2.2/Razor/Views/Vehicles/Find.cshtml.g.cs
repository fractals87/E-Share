#pragma checksum "C:\Users\p.franzini\_PERSONAL\uni\4°ANNO\APPLICAZIONI WEB LINGUAGGI E ARCHITETTURE\Project\E-Share\E-Share\Views\Vehicles\Find.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "8ef6a8f7489e287693ca3312db8e9eb2d8702d1d"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Vehicles_Find), @"mvc.1.0.view", @"/Views/Vehicles/Find.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Vehicles/Find.cshtml", typeof(AspNetCore.Views_Vehicles_Find))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "C:\Users\p.franzini\_PERSONAL\uni\4°ANNO\APPLICAZIONI WEB LINGUAGGI E ARCHITETTURE\Project\E-Share\E-Share\Views\_ViewImports.cshtml"
using E_Share;

#line default
#line hidden
#line 2 "C:\Users\p.franzini\_PERSONAL\uni\4°ANNO\APPLICAZIONI WEB LINGUAGGI E ARCHITETTURE\Project\E-Share\E-Share\Views\_ViewImports.cshtml"
using E_Share.Models;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"8ef6a8f7489e287693ca3312db8e9eb2d8702d1d", @"/Views/Vehicles/Find.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"fb3f51d444865bdaca6fd756cd7f29e91dfb6345", @"/Views/_ViewImports.cshtml")]
    public class Views_Vehicles_Find : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("href", new global::Microsoft.AspNetCore.Html.HtmlString("~/js/leaflet/leaflet.css"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("rel", new global::Microsoft.AspNetCore.Html.HtmlString("stylesheet"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("asp-action", "CatchVehicles", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_3 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("method", "post", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_4 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/js/leaflet/leaflet.js"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            DefineSection("Styles", async() => {
                BeginContext(18, 121, true);
                WriteLiteral("\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\" />\r\n    ");
                EndContext();
                BeginContext(139, 57, false);
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("link", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "8ef6a8f7489e287693ca3312db8e9eb2d8702d1d5521", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                EndContext();
                BeginContext(196, 197, true);
                WriteLiteral("\r\n    <style>\r\n        html, body {\r\n            height: 100%;\r\n            margin: 0;\r\n        }\r\n\r\n        #map {\r\n            width: 600px;\r\n            height: 400px;\r\n        }\r\n    </style>\r\n");
                EndContext();
            }
            );
#line 17 "C:\Users\p.franzini\_PERSONAL\uni\4°ANNO\APPLICAZIONI WEB LINGUAGGI E ARCHITETTURE\Project\E-Share\E-Share\Views\Vehicles\Find.cshtml"
  
    ViewData["Title"] = "Find";

#line default
#line hidden
            BeginContext(436, 187, true);
            WriteLiteral("\r\n    <div class=\"col-md-4\">\r\n<button type=\"button\" class=\"btn btn-primary\" data-toggle=\"modal\" onclick=\"catchVehicle()\" data-target=\"#exampleModal\">Scan Qrcode</button>\r\n        </div>\r\n");
            EndContext();
            BeginContext(623, 459, false);
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "8ef6a8f7489e287693ca3312db8e9eb2d8702d1d7614", async() => {
                BeginContext(670, 405, true);
                WriteLiteral(@"
    <div class=""col-md-4"">
        <div class=""form-group"">
            <label class=""control-label"">Code: </label>
            <input name=""VehicleCode"" class=""form-control"">
            <input type=""hidden"" name=""typeRequest"" value=""1"" />
        </div>
        <div class=""form-group"">
            <button type=""submit"" class=""btn btn-primary"">Catch code</button>
        </div>
    </div>
");
                EndContext();
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper.Action = (string)__tagHelperAttribute_2.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_2);
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper.Method = (string)__tagHelperAttribute_3.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_3);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            EndContext();
            BeginContext(1082, 615, true);
            WriteLiteral(@"

<div id='map'></div>
<!-- Modal -->
<div class=""modal fade"" id=""exampleModal"" tabindex=""-1"" role=""dialog"" aria-labelledby=""exampleModalLabel"" aria-hidden=""true"">
    <div class=""modal-dialog"" role=""document"">
        <div class=""modal-content"">
            <div class=""modal-header"">
                <h5 class=""modal-title"" id=""exampleModalLabel"">Scan QrCode</h5>
                <button type=""button"" class=""close"" data-dismiss=""modal"" aria-label=""Close"">
                    <span aria-hidden=""true"">&times;</span>
                </button>
            </div>
            <div class=""modal-body"">
");
            EndContext();
            BeginContext(3336, 286, true);
            WriteLiteral(@"                <video id=""preview"" style=""width:450px;""></video>
            </div>
            <div class=""modal-footer"">
                <button type=""button"" class=""btn btn-secondary"" data-dismiss=""modal"">Close</button>
            </div>
        </div>
    </div>
</div>

");
            EndContext();
            DefineSection("Scripts", async() => {
                BeginContext(3640, 415, true);
                WriteLiteral(@"
    <!--https://github.com/schmich/instascan-->
    <script type=""text/javascript"" src=""https://cdnjs.cloudflare.com/ajax/libs/webrtc-adapter/3.3.3/adapter.min.js""></script>
    <script type=""text/javascript"" src=""https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.10/vue.min.js""></script>
    <script type=""text/javascript"" src=""https://rawgit.com/schmich/instascan-builds/master/instascan.min.js""></script>
    ");
                EndContext();
                BeginContext(4055, 47, false);
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("script", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "8ef6a8f7489e287693ca3312db8e9eb2d8702d1d11539", async() => {
                }
                );
                __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_4);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                EndContext();
                BeginContext(4102, 5717, true);
                WriteLiteral(@"
    <script>
        var map = L.map('map').fitWorld();

        $(document).ready(function () {
            //var mymap = L.map('mapid').setView([45.449124, 8.626613], 15);
            //L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
            //    attribution: 'Map data &copy; <a href=""https://www.openstreetmap.org/"">OpenStreetMap</a> contributors, <a href=""https://creativecommons.org/licenses/by-sa/2.0/"">CC-BY-SA</a>, Imagery © <a href=""https://www.mapbox.com/"">Mapbox</a>',
            //    maxZoom: 18,
            //    id: 'mapbox/streets-v11',
            //    accessToken: 'pk.eyJ1IjoiZnJhY3RhbHM4NyIsImEiOiJjazU5bWRwbnQwbThwM2xxaGt0MDR3MjZmIn0.kzKEPozp5BAcfg-OiRn5Og'
            //}).addTo(mymap);


            L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
                maxZoom: 18,
                at");
                WriteLiteral(@"tribution: 'Map data &copy; <a href=""https://www.openstreetmap.org/"">OpenStreetMap</a> contributors, ' +
                    '<a href=""https://creativecommons.org/licenses/by-sa/2.0/"">CC-BY-SA</a>, ' +
                    'Imagery © <a href=""https://www.mapbox.com/"">Mapbox</a>',
                id: 'mapbox/streets-v11'
            }).addTo(map);


            map.on('locationfound', onLocationFound);
            map.on('locationerror', onLocationError);

            map.locate({ setView: true, maxZoom: 16 });

            GetVeichles();
        });


        function onLocationFound(e) {
            var radius = e.accuracy / 2;

            L.marker(e.latlng).addTo(map)
                .bindPopup(""You are here"").openPopup();

            L.circle(e.latlng, radius).addTo(map);
        }

        function onLocationError(e) {
            alert(e.message);
        }


        function GetVeichles() {
            $.getJSON('/Vehicles/GetVehicles', function (vehicles) {
            ");
                WriteLiteral(@"    if (vehicles != null && !jQuery.isEmptyObject(vehicles)) {
                    $.each(vehicles, function (index, vehicles) {
                        //alert(vehicles);
                        //console.log(cities.id);
                        //citySelect.append($('<option/>', {
                        //    value: cities.id,
                        //    text: cities.name
                        //}));
                        L.marker([vehicles.latitude, vehicles.longitude]).bindPopup(vehicles.code + "" "" + vehicles.category + "" "" + vehicles.batteryresidue + ""%"").addTo(map);
                    });
                };
            });
        }

        function catchVehicle() {
            let scanner = new Instascan.Scanner({ video: document.getElementById('preview') });
            scanner.addListener('scan', function (content) {
               $.ajax({
                    type: ""GET"",
                    url: ""/Vehicles/CatchVehicles?VehicleCode="" + content + ""&typeRequest=2"",
       ");
                WriteLiteral(@"             contentType: ""application/json"",
                    dataType: ""json"",
                   success: function (response) {
                       if (response.status == ""OK"")
                           window.location.href = '/Vehicles/MyVehicles';
                       else
                           alert(response.message);
                    },
                    failure: function (response) {
                           alert(response.message);
                    }
                });
                //alert(content);
                scanner.stop();
            });
            Instascan.Camera.getCameras().then(function (cameras) {
                if (cameras.length > 0) {
                    scanner.start(cameras[0]);
                } else {
                    console.error('No cameras found.');
                }
            }).catch(function (e) {
                console.error(e);
            });

            //var app = new Vue({
            //    el: '#app',
");
                WriteLiteral(@"            //    data: {
            //        scanner: null,
            //        activeCameraId: null,
            //        cameras: [],
            //        scans: []
            //    },
            //    mounted: function () {
            //        var self = this;
            //        self.scanner = new Instascan.Scanner({ video: document.getElementById('preview'), scanPeriod: 5 });
            //        self.scanner.addListener('scan', function (content, image) {
            //            self.scans.unshift({ date: +(Date.now()), content: content });
            //        });
            //        Instascan.Camera.getCameras().then(function (cameras) {
            //            self.cameras = cameras;
            //            if (cameras.length > 0) {
            //                self.activeCameraId = cameras[0].id;
            //                self.scanner.start(cameras[0]);
            //            } else {
            //                console.error('No cameras found.');
");
                WriteLiteral(@"            //            }
            //        }).catch(function (e) {
            //            console.error(e);
            //        });
            //    },
            //    methods: {
            //        formatName: function (name) {
            //            return name || '(unknown)';
            //        },
            //        selectCamera: function (camera) {
            //            this.activeCameraId = camera.id;
            //            this.scanner.start(camera);
            //        }
            //    }
            //});
        }
    </script>
");
                EndContext();
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
